<script type="text/javascript" src="https://static.zip.co/lib/js/zm-widget-js/dist/zip-widget.min.js"></script>
<script>
    // merchant Id
    zip_widget_merchantId = '<?= /* @noEscape */ $block->getMerchantPublicKey(); ?>';
    // Environment like sandbox or production
    zip_widget_env = '<?= $block->escapeHtml($block->getEnvironment());?>';
    // region like au/nz/uk/us/za
    zip_widget_region = '<?= $block->escapeHtml(strtolower($block->getRegion()));?>';
    // max price to show the zip cart or product widget
    zip_widget_max_price = '<?= /* @noEscape */ $block->getOrderTotalMaximum();?>';
    // min price to show the zip cart or product widget
    zip_widget_min_price = '<?= /* @noEscape */ $block->getOrderTotalMinimum();?>';
    // widget display inline if this value is true otherwise it will display iframe
    zip_widget_display_inline = '<?= $block->escapeHtml($block->isDisplayInlineWidget());?>';
    // if this value is set then it will show the translated content. language like es/en etc
    zip_widget_language = '<?= $block->escapeHtml(strtolower($block->getLanguageCode()));?>';
    // product price for dynamic widget
<?php if ($block->getPageType() == 'cart'): ?>
    zip_widget_cart_price = <?= /* @noEscape */ $block->getCartTotal();?>;
<?php endif?>
<?php if ($block->getPageType() == 'product'): ?>
    zip_widget_product_price = <?= /* @noEscape */ $block->getProductPrice();?>;
<?php endif; ?>
    // display widget selector
<?php foreach ($block->getElementSelectors() as $key => $selector): if (!empty($selector)): ?>
    zip_widget_<?= $block->escapeHtml($key); ?> = "<?= $block->escapeHtml($selector); ?>";
<?php endif; ?>
<?php endforeach; ?>
</script>

<?php
// Render widget-config inline script using ViewModel from block
$viewModel = $block->getWidgetConfigViewModel();
if ($viewModel):
?>
<script type="text/x-magento-init">
{
    "*": {
        "Zip_ZipPayment/js/widget-config": <?= /* @noEscape */ $viewModel->getWidgetConfigJson() ?>
    }
}
</script>
<?php endif; ?>
